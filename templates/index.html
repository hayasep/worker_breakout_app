{% extends "base.html" %}
{% block title %}Target Worker Breakout{% endblock %}
{% block header %}
<h2 class="my-4">Calculate Breakout by Stocking Time (Hours)</h2>
{% endblock %}
{% block content %}
<form action="{{ url_for('calculate_distribution') }}" method="post">
    <div class="form-group">
        {% for section in sections %}
            <label for="time_{{ section }}">{{ section }}:</label>
            <input type="number" class="form-control" step="0.1" id="time_{{ section }}" name="time_{{ section }}" min="0" required>
        {% endfor %}
    </div>
    <h2 class="my-4">Select workers available for tonight</h2>
    <div class="form-check">
        <input type="checkbox" class="form-check-input" onClick="toggleSelectAll(this)">
        <label class="form-check-label">Select All</label>
    </div>
    <div class="row">
        {% for i in range(0, workers|length, 15) %}
            <div class="col-md-3">
                {% for worker in workers[i:i+15] %}
                    <div class="form-check">
                        <input type="checkbox" class="form-check-input" id="working_{{ worker.name }}" name="working" value="{{ worker.name }}">
                        <label class="form-check-label" for="working_{{ worker.name }}">{{ worker.name }}</label>
                    </div>
                {% endfor %}
            </div>
        {% endfor %}
    </div>
    <button type="submit" class="btn btn-primary my-4">Calculate Breakout</button>
</form>
<script>
    function toggleSelectAll(source) {
        checkboxes = document.getElementsByName('working');
        for (var i = 0, n = checkboxes.length; i < n; i++) {
            checkboxes[i].checked = source.checked;
        }
    }
</script>
{% endblock %}
